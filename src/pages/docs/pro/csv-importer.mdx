import { CodeComponent } from '@/components/code.component'
import DocsLayout from '@/layouts/docs.layout'
import ComponentLayout from '@/layouts/component.layout'
import { Link, View } from '@fold-dev/core'
import React from 'react'
import { CsvImporter } from '@fold-pro/react'
import * as data from '@/dummy_data'

export const docs = {"title":"CSV Importer","subtitle":"Make sense of imported data by correctly mapping columns with the CSV Importer.","description":"The CSV Importer component offers a streamlined way of onboarding complex data - ideal for customer success, onboarding & data teams.","experimental":true,"pro":true}

export const props = [{"tags":{},"filePath":"src/csv-importer/index.ts","description":"","displayName":"CsvImporterColumnMapRow","methods":[],"props":{}},{"tags":{},"filePath":"src/csv-importer/index.ts","description":"","displayName":"CsvImporterColumnMap","methods":[],"props":{}},{"tags":{},"filePath":"src/csv-importer/index.ts","description":"","displayName":"CsvImporterDataClean","methods":[],"props":{}},{"tags":{},"filePath":"src/csv-importer/index.ts","description":"","displayName":"CsvImporterDone","methods":[],"props":{}},{"tags":{},"filePath":"src/csv-importer/index.ts","description":"","displayName":"CsvImporterFooter","methods":[],"props":{"step":{"defaultValue":null,"description":"","name":"step","declarations":[{"fileName":"pro/src/csv-importer/csv-importer-footer.tsx","name":"TypeLiteral"}],"required":true,"type":{"name":"number"},"tags":{}},"onStepChange":{"defaultValue":null,"description":"","name":"onStepChange","declarations":[{"fileName":"pro/src/csv-importer/csv-importer-footer.tsx","name":"TypeLiteral"}],"required":true,"type":{"name":"(value: any) => void"},"tags":{}},"onComplete":{"defaultValue":null,"description":"","name":"onComplete","declarations":[{"fileName":"pro/src/csv-importer/csv-importer-footer.tsx","name":"TypeLiteral"}],"required":true,"type":{"name":"(value: any) => void"},"tags":{}}}},{"tags":{},"filePath":"src/csv-importer/index.ts","description":"","displayName":"CsvImporterHeaderSelect","methods":[],"props":{}},{"tags":{},"filePath":"src/csv-importer/index.ts","description":"","displayName":"CsvImporterSteps","methods":[],"props":{"step":{"defaultValue":null,"description":"","name":"step","declarations":[{"fileName":"pro/src/csv-importer/csv-importer-steps.tsx","name":"TypeLiteral"}],"required":true,"type":{"name":"number"},"tags":{}}}},{"tags":{},"filePath":"src/csv-importer/index.ts","description":"","displayName":"CsvImporterUpload","methods":[],"props":{}},{"tags":{},"filePath":"src/csv-importer/index.ts","description":"","displayName":"CsvImporterValidationPopup","methods":[],"props":{}},{"tags":{},"filePath":"src/csv-importer/index.ts","description":"","displayName":"CsvImporterProvider","methods":[],"props":{}},{"tags":{},"filePath":"src/csv-importer/index.ts","description":"","displayName":"CsvImporter","methods":[],"props":{}}]

export const css = [[["--f-csv-importer-padding","1rem"],["--f-csv-importer-gap","1.5rem"]]]



<CodeComponent filename="csv-importer.tsx" code="aW1wb3J0IHsKICBDc3ZJbXBvcnRlckNvbHVtbk1hcFJvdywKICBDc3ZJbXBvcnRlckNvbHVtbk1hcCwKICBDc3ZJbXBvcnRlckRhdGFDbGVhbiwKICBDc3ZJbXBvcnRlckRvbmUsCiAgQ3N2SW1wb3J0ZXJGb290ZXIsCiAgQ3N2SW1wb3J0ZXJIZWFkZXJTZWxlY3QsCiAgQ3N2SW1wb3J0ZXJTdGVwcywKICBDc3ZJbXBvcnRlclVwbG9hZCwKICBDc3ZJbXBvcnRlclZhbGlkYXRpb25Qb3B1cCwKICBDc3ZJbXBvcnRlclByb3ZpZGVyLAogIENzdkltcG9ydGVyLAp9IGZyb20gIkBmb2xkLWRldi9jb3JlIjsK" />
```tsx
import {
  CsvImporterColumnMapRow,
  CsvImporterColumnMap,
  CsvImporterDataClean,
  CsvImporterDone,
  CsvImporterFooter,
  CsvImporterHeaderSelect,
  CsvImporterSteps,
  CsvImporterUpload,
  CsvImporterValidationPopup,
  CsvImporterProvider,
  CsvImporter,
} from "@fold-dev/core";
```

### Usage

export const Usage = () => {
    return (<CsvImporter step={1} separator="," onComplete={(data) => console.log('data', data)} csvData={data.csv} defaultRecords={data.records} defaultHeader={data.headers} defaultMapping={data.mapping} schema={[
            { key: 'customer-id', label: 'Customer ID', type: 'string' },
            { key: 'first-name', label: 'First Name', type: 'string' },
            { key: 'last-name', label: 'Last Name', type: 'string' },
            { key: 'company', label: 'Company', type: 'string' },
            { key: 'website', label: 'Website', type: 'string' },
            {
                key: 'email',
                label: 'Email',
                type: 'string',
                validate: ({ value }) => {
                    const valid = String(value)
                        .toLowerCase()
                        .match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|.(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/);
                    if (valid) {
                        return [];
                    }
                    else {
                        return ['Not a valid email address'];
                    }
                },
            },
            {
                key: 'subscription-date',
                label: 'Subscription Date',
                type: 'date',
                transform: ({ value }) => {
                    return new Date(value).toLocaleDateString('en-US', {
                        weekday: 'short',
                        year: 'numeric',
                        month: 'long',
                        day: 'numeric',
                    });
                },
            },
        ]} toolbar={<View row gap={5} justifyContent="flex-start">
                    <Link href="https://drive.google.com/uc?id=1x2IdSNcHGLmot9i1h90gwMJr5lULC2QV&export=download" target="_blank">
                        Download CSV file ↗
                    </Link>
                </View>}/>);
};

<div className="story-block">
<Usage />
</div>

<CodeComponent filename="BasicUsage.tsx" code="ZXhwb3J0IGNvbnN0IFVzYWdlID0gKCkgPT4gewogICAgcmV0dXJuICgKICAgICAgICA8Q3N2SW1wb3J0ZXIKICAgICAgICAgICAgc3RlcD17MX0KICAgICAgICAgICAgc2VwYXJhdG9yPSIsIgogICAgICAgICAgICBvbkNvbXBsZXRlPXsoZGF0YSkgPT4gY29uc29sZS5sb2coJ2RhdGEnLCBkYXRhKX0KICAgICAgICAgICAgY3N2RGF0YT17ZGF0YS5jc3Z9CiAgICAgICAgICAgIGRlZmF1bHRSZWNvcmRzPXtkYXRhLnJlY29yZHN9CiAgICAgICAgICAgIGRlZmF1bHRIZWFkZXI9e2RhdGEuaGVhZGVyc30KICAgICAgICAgICAgZGVmYXVsdE1hcHBpbmc9e2RhdGEubWFwcGluZ30KICAgICAgICAgICAgc2NoZW1hPXtbCiAgICAgICAgICAgICAgICB7IGtleTogJ2N1c3RvbWVyLWlkJywgbGFiZWw6ICdDdXN0b21lciBJRCcsIHR5cGU6ICdzdHJpbmcnIH0sCiAgICAgICAgICAgICAgICB7IGtleTogJ2ZpcnN0LW5hbWUnLCBsYWJlbDogJ0ZpcnN0IE5hbWUnLCB0eXBlOiAnc3RyaW5nJyB9LAogICAgICAgICAgICAgICAgeyBrZXk6ICdsYXN0LW5hbWUnLCBsYWJlbDogJ0xhc3QgTmFtZScsIHR5cGU6ICdzdHJpbmcnIH0sCiAgICAgICAgICAgICAgICB7IGtleTogJ2NvbXBhbnknLCBsYWJlbDogJ0NvbXBhbnknLCB0eXBlOiAnc3RyaW5nJyB9LAogICAgICAgICAgICAgICAgeyBrZXk6ICd3ZWJzaXRlJywgbGFiZWw6ICdXZWJzaXRlJywgdHlwZTogJ3N0cmluZycgfSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBrZXk6ICdlbWFpbCcsCiAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICdFbWFpbCcsCiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsCiAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGU6ICh7IHZhbHVlIH0pID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsaWQgPSBTdHJpbmcodmFsdWUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudG9Mb3dlckNhc2UoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hdGNoKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC9eKChbXjw+KClbXF1cXC4sOzpcc0AiXSsoXC5bXjw+KClbXF1cXC4sOzpcc0AiXSspKil8LigiLisiKSlAKChcW1swLTldezEsM31cLlswLTldezEsM31cLlswLTldezEsM31cLlswLTldezEsM31cXSl8KChbYS16QS1aXC0wLTldK1wuKStbYS16QS1aXXsyLH0pKSQvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICApCgogICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbXQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsnTm90IGEgdmFsaWQgZW1haWwgYWRkcmVzcyddCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBrZXk6ICdzdWJzY3JpcHRpb24tZGF0ZScsCiAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICdTdWJzY3JpcHRpb24gRGF0ZScsCiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2RhdGUnLAogICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogKHsgdmFsdWUgfSkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IERhdGUodmFsdWUpLnRvTG9jYWxlRGF0ZVN0cmluZygnZW4tVVMnLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3ZWVrZGF5OiAnc2hvcnQnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgeWVhcjogJ251bWVyaWMnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9udGg6ICdsb25nJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRheTogJ251bWVyaWMnLAogICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICBdfQogICAgICAgICAgICB0b29sYmFyPXsKICAgICAgICAgICAgICAgIDxWaWV3CiAgICAgICAgICAgICAgICAgICAgcm93CiAgICAgICAgICAgICAgICAgICAgZ2FwPXs1fQogICAgICAgICAgICAgICAgICAgIGp1c3RpZnlDb250ZW50PSJmbGV4LXN0YXJ0Ij4KICAgICAgICAgICAgICAgICAgICA8TGluawogICAgICAgICAgICAgICAgICAgICAgICBocmVmPSJodHRwczovL2RyaXZlLmdvb2dsZS5jb20vdWM/aWQ9MXgySWRTTmNIR0xtb3Q5aTFoOTBnd01KcjVsVUxDMlFWJmV4cG9ydD1kb3dubG9hZCIKICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0PSJfYmxhbmsiPgogICAgICAgICAgICAgICAgICAgICAgICBEb3dubG9hZCBDU1YgZmlsZSDihpcKICAgICAgICAgICAgICAgICAgICA8L0xpbms+CiAgICAgICAgICAgICAgICA8L1ZpZXc+CiAgICAgICAgICAgIH0KICAgICAgICAvPgogICAgKQp9" />

```tsx
export const Usage = () => {
    return (
        <CsvImporter
            step={1}
            separator=","
            onComplete={(data) => console.log('data', data)}
            csvData={data.csv}
            defaultRecords={data.records}
            defaultHeader={data.headers}
            defaultMapping={data.mapping}
            schema={[
                { key: 'customer-id', label: 'Customer ID', type: 'string' },
                { key: 'first-name', label: 'First Name', type: 'string' },
                { key: 'last-name', label: 'Last Name', type: 'string' },
                { key: 'company', label: 'Company', type: 'string' },
                { key: 'website', label: 'Website', type: 'string' },
                {
                    key: 'email',
                    label: 'Email',
                    type: 'string',
                    validate: ({ value }) => {
                        const valid = String(value)
                            .toLowerCase()
                            .match(
                                /^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|.(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/
                            )

                        if (valid) {
                            return []
                        } else {
                            return ['Not a valid email address']
                        }
                    },
                },
                {
                    key: 'subscription-date',
                    label: 'Subscription Date',
                    type: 'date',
                    transform: ({ value }) => {
                        return new Date(value).toLocaleDateString('en-US', {
                            weekday: 'short',
                            year: 'numeric',
                            month: 'long',
                            day: 'numeric',
                        })
                    },
                },
            ]}
            toolbar={
                <View
                    row
                    gap={5}
                    justifyContent="flex-start">
                    <Link
                        href="https://drive.google.com/uc?id=1x2IdSNcHGLmot9i1h90gwMJr5lULC2QV&export=download"
                        target="_blank">
                        Download CSV file ↗
                    </Link>
                </View>
            }
        />
    )
}
```

export default ({ children }) => <ComponentLayout docs={docs} props={props} css={css}>{children}</ComponentLayout>